lst = ['@data.relax.relax_1.title',
 '@data.something_fun.praise_time',
 'activity_@local.activity_data.id',
 '@global.w_self_care',
 '@global.hp_review',
 '@global.m_workshop_released',
 '@global.m_workshop_tomorrow',
 '@global.m_something_fun',
 '@global.m_praise',
 '@global.tell_me_more_button',
 '@fields.w_celebrate_completion_level',
 '@global.m_workshop_reminder',
 '@global.m_workshop_in_progress',
 '@global.m_hp_reminder',
 '@global.m_parent_points_overview',
 '@global.w_1on1',
 '@global.w_praise',
 '@global.w_instruct',
 '@global.w_stress',
 '@global.w_money',
 '@global.w_rules',
 '@global.w_consequence',
 '@global.w_solve',
 '@global.w_safe',
 '@global.parent_centre',
 '@global.weekly_workshop_options',
 '@global.parent_points',
 '@global.w_crisis',
 '@field.demo_changed_field_checkbox',
 '@campaign.debug_campaign',
 '@fields.which_relax',
 '@local.relax@local.text',
 'plh_audio/relax/@local.relax@local.audio',
 '@fields.@local.relax_favourite',
 '@field.which_relax',
 '@campaign.debug_campaign_2',
 '@data.debug_vars.text_1.value',
 {'@data': {'debug_vars': {'collection_1': {}}}},
 '@global.debug_item_3',
 '@local.var_text_4 calling a variable',
 '10*@local.var_counter',
 '@local.var_counter + @local.var_counter',
 '@data.debug_vars.bool_true.value',
 '@local.var_bool_true',
 '@data.debug_vars.bool_false.value',
 '@data.debug_vars.number_0.value',
 '@global.debug_item_1',
 '@field.@local.relax@local.favourite',
 '@field.@local.relax_favourite',
 '@field.relax_3_favourite',
 '@local.relax@local.favourite',
 '@local.relax_favourite',
 '@global.debug_variable_1',
 '@fields.debug_tracker_text_box',
 '@global.w_instruct_female_caregiver',
 '@global.w_instruct_teen_girl',
 '@global.parent_point',
 '@global.guide_teen_name',
 '@data.example.example1.value',
 '@data.example.example1',
 '@global.example_global_constant_title',
 '@global.example_global_constant_image',
 '@local.default_value',
 '@local.title_name',
 '@local.question_text',
 '@fields.feature_default_input',
 '@fields.user_age',
 '@global.all_relaxes',
 '@global.relax_passive_short',
 '@global.relax_passive_long',
 '@global.relax_active',
 '@local.activity@local.favourite',
 '@global.all_activities',
 '@field.demo_changed_field_1 || "@field.demo_changed_field_2"=="name_var_1"',
 '@field.demo_changed_field_1 || "@field.demo_changed_field_2"=="name_var_2"',
 '@field.demo_changed_field_3 || "@field.demo_changed_field_4"=="name_var_1"',
 '@field.demo_changed_field_3 || "@field.demo_changed_field_4"=="name_var_2"',
 '@field.demo_changed_field_7 || "@field.demo_changed_field_8"=="name_var_2"',
 '@global.chat_together',
 '@global.do_together',
 '@global.my_activities',
 '@data.something_fun.reflect_positive.title',
 '@data.something_fun.check_in_chat.title',
 '@data.something_fun.dream_travel.title',
 '@data.something_fun.famous_party.title',
 '@data.something_fun.two_truths.title',
 '@data.something_fun.time_machine.title',
 '@data.something_fun.superpowers.title',
 '@data.something_fun.friendly_chat.title',
 '@data.something_fun.interrupter.title',
 '@data.something_fun.three_options.title',
 '@data.something_fun.yes_no_maybe.title',
 '@data.something_fun.memory_game.title',
 '@data.something_fun.invent_story.title',
 '@data.something_fun.co_chef.title',
 '@data.something_fun.dance_moves.title',
 '@data.something_fun.mirror.title',
 '@data.something_fun.whats_new.title',
 '@data.something_fun.get_active.title',
 '@data.something_fun.name_that_tune.title',
 '@data.something_fun.pass_the_snap.title',
 '@data.something_fun.family_workout.title',
 '@data.something_fun.housework.title',
 '@data.something_fun.doing_what.title',
 '@data.something_fun.crazy_chicken.title',
 '@local.activity_data.title',
 '@fields.@local.activity_favourite',
 '@campaign.relax',
 '@campaign.something_fun',
 '@global.relax_and_activities',
 'Relaxation activities',
 'box_duo_combo_box',
 '@data.relax.relax_2.title',
 '@data.relax.relax_3.title',
 'true',
 'false',
 '@data.relax.relax_4.title',
 '@data.relax.relax_5.title',
 '@data.relax.relax_6.title',
 '@data.relax.relax_7.title',
 '@data.relax.relax_8.title',
 '@data.relax.relax_9.title',
 '@data.relax.relax_10.title',
 '@data.relax.relax_11.title',
 '@data.relax.relax_12.title',
 'tile_parent_points',
 'tile_parent_centre',
 '@data.relax.relax_14.title',
 '@data.relax.relax_15.title',
 '@data.relax.relax_16.title',
 '@data.relax.relax_17.title',
 '@data.relax.relax_18.title',
 '@data.relax.relax_19.title',
 '@data.relax.relax_13.title',
 '@data.relax.relax_20.title',
 '@data.relax.relax_21.title',
 '@data.relax.relax_22.title',
 '@data.relax.relax_23.title',
 '@data.relax.relax_24.title',
 '@data.habit.relax.mark_text',
 '@global.home_practice_problem_solving: @global.w_money',
 '@global.home_practice_problem_solving: @global.w_praise',
 '@data.habit.spend_time.mark_text',
 '@fields.user_gender',
 '@fields.user_name',
 '@global.lets_go_button',
 '@global.w_solve_tools',
 '@field.total_parent_point_safe',
 '@global.check_it_out_button',
 '@fields.which_activity',
 '@data.something_fun.@local.activity',
 '@local.workshop_data.id',
 '@fields.w_self_care_completion_level',
 '@fields.w_1on1_completion_level',
 '@fields.w_praise_completion_level',
 '@fields.w_instruct_completion_level',
 '@fields.w_stress_completion_level',
 '@fields.w_money_completion_level',
 '@fields.w_rules_completion_level',
 '@fields.w_consequence_completion_level',
 '@fields.w_solve_completion_level',
 '@fields.w_safe_completion_level',
 '@fields.w_crisis_completion_level',
 '@fields.w_celebrate_completion_level@local.outro_habit_text',
 '@data.habit.spend_time.short_mark_text',
 '@data.workshop.w_consequence',
 '@data.workshop.w_crisis',
 '@data.habit.instruct_positively.short_mark_text',
 '@data.habit.instruct_positively.image_asset',
 '@data.workshop.w_instruct',
 '@data.workshop.w_money',
 '@data.workshop.w_money.tools',
 '@data.habit.money.short_mark_text',
 '@data.habit.praise_teen.short_mark_text',
 '@data.habit.breathe.short_mark_text',
 '@data.habit.breathe.image_asset',
 '@local.habit_text',
 '@fields.relax_audio',
 '@data.habit.relax.short_mark_text',
 '@global.home_practice_problem_solving',
 'box_parent_points_temp',
 '@field.demo_changed_field_7 || "@field.demo_changed_field_8"=="name_var_1"',
 'demo_changed_field_2',
 '@field.total_parent_point_relax',
 '@field.total_parent_point_treat_yourself',
 '@field.total_parent_point_praise_yourself',
 '@field.total_parent_point_spend_time',
 '@field.total_parent_point_praise_teen',
 '@field.total_parent_point_instruct_positively',
 '@field.total_parent_point_breathe',
 '@global.home_practice_problem_solving: @global.w_consequence',
 '@global.technical_support',
 '@local.activity_title',
 'example_text',
 'Button_1',
 '_favourite',
 '@global.w_celebrate',
 'w_consequence_example_1',
 'w_consequence_tools',
 'w_crisis_tools',
 'box_duo_radio_buttons',
 'box_radio_buttons',
 'box_duo',
 'w_safe_tools',
 'debug_actions_middle_1',
 '@fields.feature_default_choice',
 '@fields.weekly_parent_point_praise_teen',
 '@data.habit.safe.short_mark_text',
 '@data.habit.treat_yourself.short_mark_text',
 '@field.total_parent_point_consequence',
 '@data.debug_vars.list_1.value_list',
 '@local.var_list_1.length',
 '@local.radio_group_image_1',
 '@local.radio_group_text',
 '@local.checkbox_4',
 '@local.@local.combo_box_defaults',
 '@fields.debug_render_updates_field',
 '@local.child_local_variable',
 '@local.var_text_1',
 '@data.workshop.w_praise',
 '@data.habit.praise_teen.short_mark_text@local.test_3_text',
 'relax_5',
 'relax_1',
 'relax_2',
 'relax_14',
 'relax_3',
 '@data.workshop.w_rules',
 '@data.workshop.w_safe',
 '@data.workshop.w_1on1',
 '@data.workshop.w_solve',
 '@data.workshop.w_stress',
 '@global.home_practice_problem_solving: @global.w_1on1',
 '@local.test_2_text',
 '0-10',
 '11-20',
 '21-30',
 '31-40',
 '41-50',
 '51-60',
 '61-70',
 '71-80',
 '80+',
 '@local.test_1_text',
 'radio_group_tracker',
 'radio_group_final',
 'debug_nesting_override_1',
 'debug_nesting_sheet_2',
 '@local.test_3_text',
 'debug_wrapper',
 'w_stress_tools',
 'w_praise_hp_review_1',
 'w_praise_hp_content',
 'w_praise_hp_review_2',
 '@local.outro_habit_text',
 'combo_box_tracker',
 'combo_box_final',
 'combo_box_text',
 '@global.more_button',
 'box_story',
 'box_combo_box',
 'box_multi_radio_buttons',
 'box_buttons',
 'box_image',
 'w_rules_tools',
 'box_timer',
 'w_praise_tools',
 'btn_text',
 'w_money_path',
 'w_money_tools',
 'box_image_more',
 'box_audio',
 'w_instruct_tools',
 'w_1on1_tools',
 'name_var_2',
 'combo_box_2_field',
 'debug_radio_group',
 'box_video',
 '@local.debug_text_box',
 '@local.var_bool_false',
 '@local.var_recursive_lookup',
 '@local.var_counter',
 '@local.global_text',
 '@local.checkbox_3',
 '@local.checkbox_5',
 '@fields.checkbox_a_s_test',
 '@local.debug_render_updates_text',
 '@local.text_box',
 '@local.debug_variable_one',
 '@local.debug_variable_two',
 '@local.debug_variable_3',
 '@local.debug_variable_four',
 '@local.debug_variable-five',
 '@field.demo_changed_combo_box',
 '@field.demo_changed_radio_group',
 '@field.demo_changed_text_box',
 '@field.demo_changed_slider',
 '@global.example_global_constant_text',
 '@field.field_0',
 '@field.field_1',
 'w_solve_tools',
 'w_self_care_tools',
 'debug_two_texts',
 '@fields.debug_go_to_field',
 '@data.debug.item_3.text',
 '@data.debug.item_1.text',
 '@data.debug.item_1.image_asset',
 '@field.total_parent_point_money',
 '@global.w_stress_tools',
 '@campaign.workshop_quick_start',
 '@fields.workshop_day',
 '@fields.current_workshop',
 '@global.help',
 '@field.field_2',
 '@field.first_app_open',
 '@field.current_date',
 '@field.second_week',
 '@field.time_difference',
 '@local.placeholder',
 '@local.checkbox_1',
 '@local.checkbox_2',
 '@global.w_stress_teen_boy_2',
 '@global.w_stress_girl',
 '@global.w_self_care_tools',
 '@global.w_praise_tools',
 '@global.w_instruct_tools',
 '@global.w_money_tools',
 '@global.w_rules_tools',
 '@global.w_consequence_tools',
 '@global.w_safe_tools',
 '@global.w_crisis_tools',
 '@global.w_celebrate_tools',
 '@global.covid',
 '@data.habit.praise_teen.title',
 '@fields.weekly_parent_point_praise_teen times',
 '@global.parent_points this week',
 '@local.text_area',
 '@fields.demo_changed_field_parent_point',
 '@local.combo_box',
 '@global.data_warning_websites',
 '@global.extra_if_survey_completed',
 '@global.support_contacts',
 '@global.evidence_base',
 '@data.habit.instruct_positively.mark_text',
 '@global.home_practice_problem_solving: @global.w_stress',
 '@data.habit.consequence.mark_text',
 '@global.home_practice_problem_solving: @global.w_safe',
 '@global.home_practice_problem_solving: @global.w_rules',
 '@global.home_practice_problem_solving: @global.w_crisis',
 '@data.habit.spend_time.mark_text@global.parent_centre',
 '@local.current_workshop_data.in_text_title',
 '@global.@fields.this_workshop_tools',
 '@global.together',
 '@global.w_stress_teen_boy_1',
 '@global.individual',
 '@fields.group_name',
 '@local.threshold',
 '@fields.this_workshop',
 '@fields.demo_changed_field_parent_point_1',
 '@local.current_workshop_data.number',
 '@local.quick_start_campaign.workshop_data',
 '@local.current_workshop_data.id',
 '@data.habit.money.mark_text',
 '@local.workshop_data.in_text_title',
 '@data.habit.praise_teen.mark_text',
 '@global.home_practice_problem_solving: @global.w_solve',
 '@data.habit.praise_yourself.mark_text',
 '@data.habit.treat_yourself.mark_text',
 '@data.habit.safe.mark_text',
 '@global.ideas_button',
 '@global.home_practice_problem_solving: @global.w_instruct',
 '@global.ideas_short_button',
 '@data.habit.breathe.mark_text',
 '@global.essential_tools',
 '@local.audio_src',
 '@field.user_name',
 '@global.parent_app',
 '@field.user_name',
 '@local.timer_duration minutes',
 '@global.weekly_workshop',
 '@fields.group_name',
 '@field.answer_q1',
 '@field.answer_q2',
 '@local.progress_bar_value',
 '@local.activity_image',
 '@field.group_name',
 '@data.habit.instruct_positively.title',
 '@local.tool_style',
 '@global.my_tips',
 '@global.weekly_workshops',
 '@global.survey_welcome_t_3',
 '@local.tools_title',
 '@local.toggle_value',
 '@local.text_1_toggle',
 '@local.var_list_1_length',
 '@field.variable', '@global.w_instruct_female_caregiver', '@global.w_instruct_teen_girl',
       '@global.parent_point', '@global.w_instruct', '@global.guide_teen_name',
 '@local.tip_icon', '@global.weekly_workshop',
 '@campaign.unlock_workshops',
 '@campaign.weekly_workshops',
 '@campaign.parent_points',
 '@campaign.parent_centre',
 '@local.unlock_workshops.click_action_list',
 '@global.my_relaxes',
 '@global.w_1on1_tools']

import os
import json

path = os.getcwd().replace('\\', '//')
json_decode = json.load(open( path + "//Outputs-Template.json", encoding='utf-8'))

ignore = ('.json', '.png', '.svg', '.mp3', '.mp4')
result = []
#rows = json_decode[0]
for i in range(0, len(json_decode)):
    val = json_decode[i]['rows']
    for item in val:
        #print(item.get('exclude_from_translation'))
        my_dict={}
        if not 'exclude_from_translation' in item or not bool(item.get('exclude_from_translation')) == True:
            if not str(item.get('value')) in lst:
                if not str(item.get('value')).endswith(ignore) and not str(item.get('value')).startswith('https') and (not str(item.get('value')) == 'true') and str(item.get('value')) != 'None' and not str(item['value']).isnumeric() and str(item.get('type')) != 'template' and str(item.get('value')) != 'nested_properties' and not str(item.get('value')).startswith('_stepper') and not str(item.get('value')).startswith('_text') and not str(item.get('value')).startswith('.audio') and not str(item.get('value')).startswith('.text'):
                    my_dict['SourceText']=item.get('value')
        if 'rows' in str(item.get('rows')):
            for it in item['rows']:
                dict1 = {}
                if not 'exclude_from_translation' in it or not bool(it.get('exclude_from_translation')) == True:
                    if not str(it.get('value')) in lst:
                        if not str(it.get('value')).endswith(ignore) and not str(it.get('value')).startswith('https') and not str(it.get('value')) == 'true' and str(it.get('value')) != 'None' and not str(it['value']).isnumeric() and str(it.get('type')) != 'template' and str(it.get('value')) != 'nested_properties' and not str(it.get('value')).startswith('_stepper') and not str(it.get('value')).startswith('_text') and not str(it.get('value')).startswith('.audio') and not str(it.get('value')).startswith('.text'):
                            dict1['SourceText']=it.get('value')
                        result.append(dict1)
                        if 'rows' in str(it):
                            for itm in it['rows']:
                                dict2 = {}
                                if not 'exclude_from_translation' in itm or not bool(itm.get('exclude_from_translation')) == True:
                                    if not str(itm.get('value')) in lst:
                                        if not str(itm.get('value')).endswith(ignore) and not str(itm.get('value')).startswith('https') and not str(itm.get('value')).endswith('.mp3') and not str(itm.get('value')) == 'true' and str(itm.get('value')) != 'None' and not str(itm['value']).isnumeric() and str(itm.get('type')) != 'template' and str(itm.get('value')) != 'nested_properties' and not str(itm.get('value')).startswith('_stepper') and not str(itm.get('value')).startswith('_text') and not str(itm.get('value')).startswith('.audio') and not str(itm.get('value')).startswith('.text'):
                                            dict2['SourceText']=itm.get('value')
                                        result.append(dict2)
                                        if 'rows' in str(itm):
                                            for itms in itm['rows']:
                                                dict3 = {}
                                                if not 'exclude_from_translation' in itms or not bool(itms.get('exclude_from_translation')) == True:
                                                    if  not str(itms.get('value')) in lst:
                                                        if not str(itms.get('value')).endswith(ignore) and not str(itms.get('value')).startswith('https') and not str(itms.get('exclude_from_translation')) == 'true' and not str(itms.get('value')) == 'true' and str(itms.get('value')) != 'None' and not str(itms['value']).isnumeric() and str(itms.get('type')) != 'template' and str(itms.get('value')) != 'nested_properties' and not str(itms.get('value')).startswith('_stepper') and not str(itms.get('value')).startswith('_text') and not str(itms.get('value')).startswith('.audio') and not str(itms.get('value')).startswith('.text'):
                                                            dict3['SourceText']=itms.get('value')
                                                        result.append(dict3)
        result.append(my_dict)

#--------------------------------------------------------------------------------------

result = list(filter(({}).__ne__, result))

result = [i for n, i in enumerate(result) if i not in result[n + 1:]]

#---------------------------------------------------------------------------------------

rs = []
reslt = []
for val in result:
    dicts={}
    if not type(val['SourceText']) is list and not type(val['SourceText']) is dict:
        dicts['SourceText'] = val['SourceText']
        dicts['text']=val['SourceText']
        dicts['type']='template'
        if str(val['SourceText']).count('@') == 1:
            for tx in lst:
                if str(tx) in str(val['SourceText']):
                    dicts['note']='The string '+ tx +' should not be translated.'
        if '@' in str(val['SourceText']) and str(val['SourceText']).count('@') > 1:
            st = []
            #print(str(val['SourceText']))
            for tx in lst:
                if str(tx) in str(val['SourceText']):
                    st.append(tx)
            if len(st) == 1:
                dicts['note']='The string '+ st[0] +' should not be translated.'
            if len(st) == 2:
                dicts['note']='The following strings should not be translated: ' + st[0] + ' ' + st[1]
            if len(st) == 3:
                dicts['note']='The following strings should not be translated: ' + st[0] + ' ' + st[1] + ' ' + st[2]
            if len(st) == 4:
                dicts['note']='The following strings should not be translated: ' + st[0] + ' ' + st[1] + ' ' + st[2] + ' ' + st[3]
            if len(st) == 5:
                dicts['note']='The following strings should not be translated: ' + st[0] + ' ' + st[1] + ' ' + st[2] + ' ' + st[3] + ' ' + st[4]
    if type(val['SourceText']) is list and not type(val['SourceText']) is dict:
        for elt in val['SourceText']:
            rs.append(elt)
        for el in rs:
            dc={}
            if not str(el).endswith(ignore) and not str(el) in lst:
                if 'text:' in str(el):
                    txt = str(el).split('text:')[1]
                    if not txt.startswith('@') and not txt.startswith(' @'):
                        dc['SourceText'] = str(el).split('text:')[1]
                        dc['text']=str(el).split('text:')[1]
                        dc['type']='template'
                        if str(el).count('@') == 1:
                            for tx in lst:
                                if str(tx) in str(el):
                                    dicts['note']='The string '+ tx +' should not be translated.'
                        if str(el).count('@') > 1:
                            d = []
                            for tx in lst:
                                if str(tx) in str(el):
                                    d.append(tx)
                            dc['note']='The following string should not be translated: '+ d[0] + ' ' + d[1]             
                if not 'text:' in str(el):
                    dc['SourceText'] = str(el)
                    dc['text']=str(el)
                    dc['type']='template'
                    if str(el).count('@') == 1:
                        for tx in lst:
                            if str(tx) in str(el):
                                dc['note']='The string '+ tx +' should not be translated.'
                    if str(el).count('@') > 1:
                        c = []
                        for tx in lst:
                            if str(tx) in str(el):
                                c.append(tx)
                        dc['note']='The following string should not be translated: '+ c[0] + ' ' + c[1]     
            reslt.append(dc)
    reslt.append(dicts)
#---------------------------------------------------------------
reslt = list(filter(({}).__ne__, reslt))

reslt = [i for n, i in enumerate(reslt) if i not in reslt[n + 1:]]
with open(path + '//Outputs//Outputs-Template.json', 'w', encoding='utf-8') as json_file:
    json.dump(reslt, json_file, ensure_ascii=False)

#----------------------------
res = [d['SourceText'] for d in reslt if 'SourceText' in d]
print('Number of characters in template.json: ',sum(len(str(i)) for i in res))